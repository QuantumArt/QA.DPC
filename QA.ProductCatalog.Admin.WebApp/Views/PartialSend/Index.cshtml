@using QA.Core.DPC.Resources
@using System.Globalization

@{
  var ignoredStatusesList = new string[ViewBag.IgnoredStatus.Length];
  for (var i = 0; i < ViewBag.IgnoredStatus.Length; i++)
  {
    ignoredStatusesList[i] = '"' + $"{ViewBag.IgnoredStatus[i]}" + '"';
  }

  var ignoredStatuses = String.Join(", ", @ignoredStatusesList);
}

<script>
  window.partialSend = {
    getActiveTaskIdUrl: "@Url.Action("Active")",
    sendForm: {
      hidden: {
        ignoredStatuses: [@Html.Raw(@ignoredStatuses)],
        localize: "@ViewBag.Localize.ToString()",
      },
      legend: "@ControlStrings.PartialSend",
      description: '@Html.Raw(ControlStrings.PartialSendDescription)',
      processSpecialStatusesCheckbox: "@ControlStrings.ProcessSpecialStatuses",
      sendOnStageOnlyCheckbox: "@ControlStrings.SendOnStageOnly",
      sendUrl: "@Url.Action("Send")",
      sendButton: "@ControlStrings.SendProducts",
    },
    result: {
      culture: "@CultureInfo.CurrentCulture.Parent.EnglishName",
      legend: "@SendProductActionStrings.YourPartialSendTask",
      getTaskUrl: "@Url.Action("Task")",
      labels: {
        displayName: "@ControlStrings.DisplayName",
        id: "Id",
        createdDate: "@ControlStrings.CreatedDate",
        userName: "@ControlStrings.UserName",
        state: "@ControlStrings.State",
        progress: "@ControlStrings.Progress",
        lastStatusChangeTime: "@ControlStrings.LastStatusChangeTime",
        message: "@ControlStrings.Message",
      },
      sendNewPackageButton: "@SendProductActionStrings.SendNewPackage",
     }
  }
</script>

<div id="root" />
<script src="~/js/bundles/PartialSend/Index.js"></script>