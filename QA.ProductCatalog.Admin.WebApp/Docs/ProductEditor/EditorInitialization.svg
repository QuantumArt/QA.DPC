<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1416px" preserveAspectRatio="none" style="width:1260px;height:1416px;" version="1.1" viewBox="0 0 1260 1416" width="1260px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1401.7656" style="stroke: #A80036; stroke-width: 1.0;" width="742" x="258" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="571.5" y="17.4951">Frontend Services</text><rect fill="#FFFFFF" height="569.1641" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="343.5" y="221.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="343.5" y1="221.7188" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="353.5" y1="221.7188" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="353.5" y1="221.7188" y2="221.7188"/><rect fill="#FFFFFF" height="444.9219" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="343.5" y="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="343.5" y1="818.8828" y2="1263.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="353.5" y1="818.8828" y2="1263.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="353.5" y1="1263.8047" y2="1263.8047"/><rect fill="#FFFFFF" height="660.5156" style="stroke: #000000; stroke-width: 2.0;" width="914" x="13" y="611.2891"/><rect fill="#FFFFFF" height="496.7578" style="stroke: none; stroke-width: 1.0;" width="914" x="13" y="775.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87" x2="87" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="87" x2="87" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87" x2="87" y1="818.8828" y2="1339.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="348" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="348" x2="348" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="348" y1="818.8828" y2="1339.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="526" x2="526" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="526" x2="526" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="526" x2="526" y1="818.8828" y2="1339.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="702" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="702" x2="702" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="702" y1="818.8828" y2="1339.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="839" x2="839" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="839" x2="839" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="839" x2="839" y1="818.8828" y2="1339.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="943" x2="943" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="943" x2="943" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="943" x2="943" y1="818.8828" y2="1339.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1185" x2="1185" y1="87.9609" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1185" x2="1185" y1="790.8828" y2="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1185" x2="1185" y1="818.8828" y2="1339.1563"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="53" y="55.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="60" y="76.8848">Backend</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="53" y="1338.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="60" y="1359.6895">Backend</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="292" y="55.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="299" y="76.8848">EditorController</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="292" y="1338.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="299" y="1359.6895">EditorController</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="475" y="55.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="482" y="76.8848">DataSerializer</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="475" y="1338.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="482" y="1359.6895">DataSerializer</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="647" y="55.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="654" y="76.8848">DataNormalizer</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="647" y="1338.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="654" y="1359.6895">DataNormalizer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="797" y="84.8848">DataContext</text><path d="M821,34.3516 C821,24.3516 839,24.3516 839,24.3516 C839,24.3516 857,24.3516 857,34.3516 L857,60.3516 C857,70.3516 839,70.3516 839,70.3516 C839,70.3516 821,70.3516 821,60.3516 L821,34.3516 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M821,34.3516 C821,44.3516 839,44.3516 839,44.3516 C839,44.3516 857,44.3516 857,34.3516 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="797" y="1352.6895">DataContext</text><path d="M821,1365.7656 C821,1355.7656 839,1355.7656 839,1355.7656 C839,1355.7656 857,1355.7656 857,1365.7656 L857,1391.7656 C857,1401.7656 839,1401.7656 839,1401.7656 C839,1401.7656 821,1401.7656 821,1391.7656 L821,1365.7656 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M821,1365.7656 C821,1375.7656 839,1375.7656 839,1375.7656 C839,1375.7656 857,1375.7656 857,1365.7656 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="891" y="84.8848">SchemaContext</text><path d="M925.5,34.3516 C925.5,24.3516 943.5,24.3516 943.5,24.3516 C943.5,24.3516 961.5,24.3516 961.5,34.3516 L961.5,60.3516 C961.5,70.3516 943.5,70.3516 943.5,70.3516 C943.5,70.3516 925.5,70.3516 925.5,60.3516 L925.5,34.3516 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M925.5,34.3516 C925.5,44.3516 943.5,44.3516 943.5,44.3516 C943.5,44.3516 961.5,44.3516 961.5,34.3516 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="891" y="1352.6895">SchemaContext</text><path d="M925.5,1365.7656 C925.5,1355.7656 943.5,1355.7656 943.5,1355.7656 C943.5,1355.7656 961.5,1355.7656 961.5,1365.7656 L961.5,1391.7656 C961.5,1401.7656 943.5,1401.7656 943.5,1401.7656 C943.5,1401.7656 925.5,1401.7656 925.5,1391.7656 L925.5,1365.7656 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M925.5,1365.7656 C925.5,1375.7656 943.5,1375.7656 943.5,1375.7656 C943.5,1375.7656 961.5,1375.7656 961.5,1365.7656 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="1140" y="51.3516"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="1136" y="55.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="1143" y="76.8848">Components</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="1140" y="1338.1563"/><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="1136" y="1342.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="1143" y="1363.6895">Components</text><rect fill="#FFFFFF" height="569.1641" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="343.5" y="221.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="343.5" y1="221.7188" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="353.5" y1="221.7188" y2="790.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="353.5" y1="221.7188" y2="221.7188"/><rect fill="#FFFFFF" height="444.9219" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="343.5" y="818.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="343.5" y1="818.8828" y2="1263.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="353.5" y1="818.8828" y2="1263.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="353.5" y1="1263.8047" y2="1263.8047"/><polygon fill="#FBFB77" points="1142,102.9609,1228,102.9609,1238,130.9609,1228,159.9609,1142,159.9609,1132,130.9609,1142,102.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="1144" y="120.4561">регистрируем</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="1144" y="136.8076">настройки и</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1144" y="153.1592">сервисы в DI</text><polygon fill="#FBFB77" points="279,170.0156,418,170.0156,428,182.0156,418,194.0156,279,194.0156,269,182.0156,279,170.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="281" y="187.5107">читаем настройкииз DI</text><polygon fill="#A80036" points="364.5,217.7188,354.5,221.7188,364.5,225.7188,360.5,221.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="358.5" x2="1184" y1="221.7188" y2="221.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="370.5" y="216.8623">.initialize()</text><polygon fill="#A80036" points="98.5,264.4219,88.5,268.4219,98.5,272.4219,94.5,268.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="342.5" y1="268.4219" y2="268.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="104.5" y="247.2139">/GetEditorSchema</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="104.5" y="263.5654">?productDefinitionId</text><path d="M200,281.4219 L200,307.4219 L338,307.4219 L338,291.4219 L328,281.4219 L200,281.4219 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M328,281.4219 L328,291.4219 L338,291.4219 L328,281.4219 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="206" y="299.917">EditorSchemaModel</text><polygon fill="#A80036" points="331.5,314.7734,341.5,318.7734,331.5,322.7734,335.5,318.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87.5" x2="337.5" y1="318.7734" y2="318.7734"/><polygon fill="#A80036" points="931.5,345.125,941.5,349.125,931.5,353.125,935.5,349.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="937.5" y1="349.125" y2="349.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="360.5" y="344.2686">.initSchema( schemaModel )</text><polygon fill="#FBFB77" points="894,362.125,993,362.125,1003,382.125,993,402.125,894,402.125,884,382.125,894,362.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="896" y="379.6201">Линкуем $ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="896" y="395.9717">ссылки в схеме</text><polygon fill="#A80036" points="690,426.1797,700,430.1797,690,434.1797,694,430.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="696" y1="430.1797" y2="430.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="360.5" y="425.3232">.initSchema( schemaModel )</text><polygon fill="#FBFB77" points="629,443.1797,775,443.1797,785,455.1797,775,467.1797,629,467.1797,619,455.1797,629,443.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="631" y="460.6748">строим схему Normalizr</text><polygon fill="#A80036" points="827,490.8828,837,494.8828,827,498.8828,831,494.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="833" y1="494.8828" y2="494.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="360.5" y="490.0264">.initSchema( schemaModel )</text><polygon fill="#FBFB77" points="789,507.8828,889,507.8828,899,527.8828,889,547.8828,789,547.8828,779,527.8828,789,507.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="791" y="525.3779">строим схему</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="791" y="541.7295">MobX State Tree</text><polygon fill="#FBFB77" points="754,558.5859,924,558.5859,934,578.5859,924,598.5859,754,598.5859,744,578.5859,754,558.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="756" y="576.0811">строим снапшоты статей со</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="756" y="592.4326">значениями по-умолчанию</text><path d="M13,611.2891 L74,611.2891 L74,619.2891 L64,629.2891 L13,629.2891 L13,611.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="660.5156" style="stroke: #000000; stroke-width: 2.0;" width="914" x="13" y="611.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="625.7842">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="89" y="624.708">[Создаем новый продукт]</text><polygon fill="#A80036" points="827,647.9922,837,651.9922,827,655.9922,831,651.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="833" y1="651.9922" y2="651.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="360.5" y="647.1357">.initStore( {} )</text><polygon fill="#FBFB77" points="771,664.9922,907,664.9922,917,676.9922,907,688.9922,771,688.9922,761,676.9922,771,664.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="773" y="682.4873">Создаем пустой Store</text><polygon fill="#A80036" points="827,712.6953,837,716.6953,827,720.6953,831,716.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="833" y1="716.6953" y2="716.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="360.5" y="711.8389">.createArticle( contentName )</text><path d="M358,729.6953 L358,755.6953 L445,755.6953 L445,739.6953 L435,729.6953 L358,729.6953 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M435,729.6953 L435,739.6953 L445,739.6953 L435,729.6953 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="364" y="748.1904">New Article</text><polygon fill="#A80036" points="364.5,763.0469,354.5,767.0469,364.5,771.0469,360.5,767.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="358.5" x2="838" y1="767.0469" y2="767.0469"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="927" y1="776.0469" y2="776.0469"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="18" y="787.4658">[Редактируем существующий продукт]</text><polygon fill="#A80036" points="98.5,853.5859,88.5,857.5859,98.5,861.5859,94.5,857.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="342.5" y1="857.5859" y2="857.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="104.5" y="836.3779">/GetEditorData</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="104.5" y="852.7295">?articleId</text><path d="M221,870.5859 L221,896.5859 L338,896.5859 L338,880.5859 L328,870.5859 L221,870.5859 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M328,870.5859 L328,880.5859 L338,880.5859 L328,870.5859 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="227" y="889.0811">EditorDataModel</text><polygon fill="#A80036" points="331.5,903.9375,341.5,907.9375,331.5,911.9375,335.5,907.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87.5" x2="337.5" y1="907.9375" y2="907.9375"/><polygon fill="#A80036" points="514,934.2891,524,938.2891,514,942.2891,518,938.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="520" y1="938.2891" y2="938.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="360.5" y="933.4326">.deserialize( JSON )</text><path d="M358,951.2891 L358,977.2891 L469,977.2891 L469,961.2891 L459,951.2891 L358,951.2891 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459,951.2891 L459,961.2891 L469,961.2891 L459,951.2891 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="364" y="969.7842">Nested Objects</text><polygon fill="#A80036" points="364.5,984.6406,354.5,988.6406,364.5,992.6406,360.5,988.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="358.5" x2="525" y1="988.6406" y2="988.6406"/><polygon fill="#A80036" points="690,1031.3438,700,1035.3438,690,1039.3438,694,1035.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="696" y1="1035.3438" y2="1035.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="364.5" y="1014.1357"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="360.5" y="1030.4873">.normalize( nestedObjects )</text><path d="M358,1048.3438 L358,1074.3438 L450,1074.3438 L450,1058.3438 L440,1048.3438 L358,1048.3438 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M440,1048.3438 L440,1058.3438 L450,1058.3438 L440,1048.3438 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="364" y="1066.8389">Flat Objects</text><polygon fill="#A80036" points="364.5,1081.6953,354.5,1085.6953,364.5,1089.6953,360.5,1085.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="358.5" x2="701" y1="1085.6953" y2="1085.6953"/><polygon fill="#A80036" points="827,1128.3984,837,1132.3984,827,1136.3984,831,1132.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="833" y1="1132.3984" y2="1132.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="364.5" y="1111.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="360.5" y="1127.542">.initStore( flatObjects )</text><polygon fill="#FBFB77" points="784,1145.3984,894,1145.3984,904,1165.3984,894,1185.3984,784,1185.3984,774,1165.3984,784,1145.3984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="786" y="1162.8936">Создаем Store из</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="786" y="1179.2451">плоских объектов</text><polygon fill="#A80036" points="827,1209.4531,837,1213.4531,827,1217.4531,831,1213.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="833" y1="1213.4531" y2="1213.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="360.5" y="1208.5967">.store[ contentName ].get( articleId )</text><path d="M358,1226.4531 L358,1252.4531 L455,1252.4531 L455,1236.4531 L445,1226.4531 L358,1226.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M445,1226.4531 L445,1236.4531 L455,1236.4531 L445,1226.4531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="364" y="1244.9482">Article Graph</text><polygon fill="#A80036" points="359.5,1259.8047,349.5,1263.8047,359.5,1267.8047,355.5,1263.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="353.5" x2="838" y1="1263.8047" y2="1263.8047"/><path d="M1083,1283.8047 L1083,1309.8047 L1180,1309.8047 L1180,1293.8047 L1170,1283.8047 L1083,1283.8047 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1170,1283.8047 L1170,1293.8047 L1180,1293.8047 L1170,1283.8047 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="1089" y="1302.2998">Article Graph</text><polygon fill="#A80036" points="1173,1317.1563,1183,1321.1563,1173,1325.1563,1177,1321.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="348.5" x2="1179" y1="1321.1563" y2="1321.1563"/><!--
@startuml EditorInitialization
skinparam shadowing false
skinparam ParticipantPadding 30
skinparam BoxPadding 100

participant Backend

box "Frontend Services"
participant EditorController
participant DataSerializer
participant DataNormalizer
database DataContext
database SchemaContext
end box

collections Components

hnote over Components
  регистрируем
  настройки и
  сервисы в DI
end note

hnote over EditorController
  читаем настройкииз DI
end note

Components -> EditorController: <b>.initialize()
activate EditorController

EditorController -> Backend: <b>/GetEditorSchema\n<b>?productDefinitionId
note left of EditorController: EditorSchemaModel
Backend - -> EditorController

EditorController -> SchemaContext: <b>.initSchema( schemaModel )
hnote over SchemaContext
 Линкуем $ref
 ссылки в схеме
end note

EditorController -> DataNormalizer: <b>.initSchema( schemaModel )
hnote over DataNormalizer: строим схему Normalizr

EditorController -> DataContext: <b>.initSchema( schemaModel )
hnote over DataContext
  строим схему
  MobX State Tree
end note
hnote over DataContext
  строим снапшоты статей со
  значениями по-умолчанию
end note

alt Создаем новый продукт

  EditorController -> DataContext: <b>.initStore( {} )
  hnote over DataContext: Создаем пустой Store

  EditorController -> DataContext: <b>.createArticle( contentName )

  note right of EditorController: New Article
  DataContext - -> EditorController

else Редактируем существующий продукт

  ...

  EditorController -> Backend: <b>/GetEditorData\n<b>?articleId
  note left of EditorController: EditorDataModel
  Backend - -> EditorController:

  EditorController -> DataSerializer: <b>.deserialize( JSON )
  note right of EditorController: Nested Objects
  DataSerializer - -> EditorController

  EditorController -> DataNormalizer: \n<b>.normalize( nestedObjects )
  note right of EditorController: Flat Objects
  DataNormalizer - -> EditorController

  EditorController -> DataContext: \n<b>.initStore( flatObjects )
  hnote over DataContext
    Создаем Store из
    плоских объектов
  end note

  EditorController -> DataContext: <b>.store[ contentName ].get( articleId )
  note right of EditorController: Article Graph
  DataContext - -> EditorController

deactivate EditorController
end

note left of Components: Article Graph
EditorController - -> Components

deactivate EditorController

@enduml

PlantUML version 1.2018.03(Thu Apr 05 19:59:15 MSK 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1251
Language: en
Country: US
--></g></svg>